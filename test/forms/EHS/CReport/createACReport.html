<style>
    #table-wrapper {
        position: relative;
    }

    #table-scroll {
        height: 150px;
        overflow: auto;
        margin-top: 20px;
    }

    #table-wrapper table {
        width: 100%;
    }

    #table-wrapper table * {
        color: black;
    }

    #table-wrapper table thead th .text {
        position: absolute;
        top: -20px;
        z-index: 2;
        height: 20px;
        width: 35%;
    }

    .title {
        width: 101%;
        background-color: #ececec;
        padding: 5px 0px 5px 10px;
        border: 1px solid #ececec;
        border-radius: 6px;
    }

    .calender {
        color: grey;
        font-size: 29px;
    }

    .calender:hover {
        cursor: pointer;
    }

    .btn-ct-ac {
        font-weight: bold;
        font-family: tahoma;
    }

    .ctr-lb {
        padding-top: 0px !important;
    }

    .my-custom-scrollbar {
        position: relative;
        height: 117px;
        overflow: auto;
    }

    .table-wrapper-scroll-y {
        display: block;
    }

    a:hover {
        cursor: pointer;
    }
</style>


<h3 class="text-center">{{'AccidentReport'|translate}}</h3>

<H4 class="title"> {{'Info'|translate}} - {{recordAC.rp_id}} </H4>
<form class="form-horizontal model-form " name="acform" style="margin-top:15px;">

    <div class="form-group" style="margin-bottom:3%;">
        <label class="col-sm-2 control-label ctr-lb">* {{'CategoryReport' | translate}}: </label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.submittype" name="SubmitType" required>
                <option ng-repeat='item in SubmitTypelist' ng-if="item.id != 'EVR'" value="{{item.id}}">
                    {{item.name | translate}}</option>
            </select>
        </div>
    </div>

    <div class=" form-group ">
        <label class="col-sm-2 control-label ctr-lb">* {{'Acdatetime'|translate}} : </label>
        <div class="col-sm-4">
            <div class='input-group date'>
                <input type='text' id="time-prc-ac" class="form-control" date-picker time="Y-m-d H:i" max="0"
                    name="ac_datetime" ng-model="recordAC.ac_datetime" required />
                <span class="input-group-addon">
                    <label class="glyphicon glyphicon-calendar" style="color: grey" for='time-prc-ac'></label>
                </span>
            </div>
        </div>

        <label class="col-sm-2 control-label ctr-lb">* {{'Improvesoft'|translate}} : </label>
        <div class="col-sm-4">
            <textarea class="form-control" type="text" name="ac_improvesoft"
                ng-model="recordAC.ac_improvesoft"></textarea>

        </div>
    </div>
    <!-- end of form-group -->

    <div class=" form-group ">
        <label class="col-sm-2 control-label ctr-lb">* {{'Aclocation'|translate}} : </label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.ac_location" name="ac_location" required>
                <option ng-repeat='item in locationlist' value="{{item.id}}">{{item.name | translate}}
                </option>
            </select>
        </div>

        <label class="col-sm-2 control-label ctr-lb">* {{'Evaluate'|translate}}</label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.ac_resultsoft" name="ac_resultsoft" required>
                <option ng-repeat="item in evaluatelist" value="{{item.id}}"> {{item.name | translate}}
                </option>
            </select>
        </div>
    </div>
    <!-- end of form-group -->

    <div class="form-group">
        <label class="col-sm-2 control-label ctr-lb"></label>
        <div class="col-sm-4">
            <input type="file" ng-file-select="UploadFileHSE($files,'Rp_Location')" id="file_location_ac"
                style="display:none !important" multiple accept="image/*">
            <button id="btn_file_location_ac" class="btn btn-info" style="display:inline-block;" type="button"
                ng-disabled="btnFile_AC"
                ng-click="btnfile('file_location_ac','file_name_location_ac')">
                <i class="glyphicon glyphicon-plus-sign fas-ct"></i> File
            </button>
            <span><input type="checkbox" ng-model="listfile_loc_ac" style="vertical-align: text-top;">
                {{'ShowFile'|translate}}</span>

            <table ng-show="listfile_loc_ac"
                class="table table-bordered table-striped mb-0 table-wrapper-scroll-y my-custom-scrollbar"
                style="margin-top:10px;">
                <tr ng-repeat="step in listfile" ng-show="step.col == 'Rp_Location'">
                    <td><a href="/{{step.name}}" target="_blank">{{step.name}}</a></td>
                    <td>
                        <a ng-click="removeFile($index)">
                            <span class="glyphicon glyphicon-remove" style="color: red; margin-top:66%;"></span>
                        </a>
                    </td>
                </tr>
            </table>

        </div>

        <label class="col-sm-2 control-label ctr-lb">* {{'Improvehard'|translate}}:</label>
        <div class="col-sm-4">
            <textarea class="form-control" type="text" name="ac_improvehard"
                ng-model="recordAC.ac_improvehard "></textarea>
        </div>
    </div>
    <!-- end of form-group -->

    <div class="form-group">
        <label class="col-sm-2 control-label ctr-lb">* {{'Rp_type'|translate}}:</label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.ac_type" name="ac_type" required>
                <option ng-repeat="item in ACTypelist" value="{{item.id}}"> {{item.name | translate}}
                </option>
            </select>
        </div>

        <label class="col-sm-2 control-label ctr-lb">* {{'Evaluate'|translate}}</label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.ac_resulthard" name="ac_resulthard" required>
                <option ng-repeat="item in evaluatelist" value="{{item.id}}"> {{item.name | translate}}
                </option>
            </select>
        </div>
    </div>
    <!-- end of form-group -->

    <div class="form-group">
        <label class="col-sm-2 control-label ctr-lb">* {{'Prevent'|translate}} </label>
        <div class="col-sm-4">
            <textarea class="form-control" type="text" name="ac_prevent" ng-model="recordAC.ac_prevent"></textarea>
        </div>

        <label class="col-sm-2 control-label ctr-lb">* {{'DateOfImprovementComplete'|translate}}:</label>
        <div class="col-sm-4">
            <div class='input-group date'>
                <input class="form-control" id="time-cpl" type="text" name="ac_datecomp" ng-model="recordAC.ac_datecomp"
                    date-picker min="0" required />
                <span class="input-group-addon">
                    <label class="glyphicon glyphicon-calendar" style="color: grey" for='time-cpl'></label>
                </span>
            </div>
        </div>
    </div>
    <!-- end of form-group -->
</form>
<!-- end of form -->

<!--.....................................................................................................................................................................................................................................................................-->

<H4 class="title"> {{'Victim_info'|translate}} </H4>

<form class="form-horizontal" role="form" name="formdetail" novalidate>

    <div class="form-group" style="margin-bottom:20px; margin-top:20px;">
        <label class="col-sm-2 control-label ctr-lb">* {{'Department'|translate}}: </label>
        <div class="col-sm-4">
            <select style="width:100%" ui-select2 ng-model="recordAC.ac_subdepartment" name="ac_subdepartment" required
                ng-change="showEmployeeList(recordAC.ac_subdepartment)" ng-disabled="mySwitch">
                <option value=""></option>
                <option value="{{deptDefault.CostCenter}}">
                    {{deptDefault.CostCenter}} - {{deptDefault.Specification|translate}}</option>
                <option value="Other"> {{'Other'|translate}} </option>
                <!--translate-->

            </select>
        </div>
    </div>
    <hr>
    <div ng-if="recordAC.ac_subdepartment=='Other'" ng-init="on=true">
        <div class="form-group">
            <label class="col-sm-2 control-label ctr-lb">* {{'EmployeeName' | translate}}: </label>
            <div class="col-lg-4 col-sm-4">
                <input class="form-control" type="text" ng-model="gd.Contractor_Victim_Name" ng-required="on" />
            </div>
            <div class="col-lg-6 col-sm-6" style="padding-left: 50px;">
                <label class="col-lg-3 col-sm-3  control-label ctr-lb"> * {{'Sex' | translate}}: </label>
                <div class="col-lg-4 col-sm-4">
                    <select class="form-control" ng-model="gd.Contractor_Victim_Sex" ng-required="on">
                        <option value="male">{{'Male' | translate}}</option>
                        <option value="female">{{'Female' | translate}}</option>
                    </select>
                </div>
                <label class="col-lg-2 col-sm-2 control-label ctr-lb">* {{'Age' | translate}} </label>
                <div class="col-lg-3 col-sm-3" style="padding-right: 0px;">
                    <input class="form-control" type="text" ng-model="gd.Contractor_Victim_Age" ng-required="on" />
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label ctr-lb">* {{'EmployeeID' | translate}}: </label>
            <div class="col-lg-4 col-sm-4">
                <input class="form-control" type="text" ng-model="gd.EmployeeID" ng-required="on" />
            </div>
            <label class="col-sm-2 control-label ctr-lb">* {{'Unit_Other' | translate}}: </label>
            <div class="col-lg-4 col-sm-4">
                <input class="form-control" type="text" ng-model="gd.Contractor_Name" ng-required="on" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label ctr-lb">* {{'Job' | translate}}: </label>
            <div class="col-lg-4 col-sm-4">
                <input class="form-control" type="text" ng-model="gd.Contractor_Victim_Work" ng-required="on" />
            </div>
            <label class="col-sm-2 control-label ctr-lb">* {{'DayToWork' | translate}}: </label>
            <div class='input-group date col-ls-4 col-sm-4'>
                <input type='text' id="DATE" class="form-control" date-picker max="0" name="DATE"
                    ng-model="gd.Contractor_Victim_DateWork" ng-required="on" />
                <span class="input-group-addon">
                    <label class="glyphicon glyphicon-calendar" style="color: grey" for='DATE'></label>
                </span>
            </div>
        </div>
    </div>



    <div class="form-group">
        <div ng-if="recordAC.ac_subdepartment!='Other'">
            <label class="col-sm-2 control-label ctr-lb">* {{'EmployeeID'|translate}}: </label>

            <div class="col-sm-4">
                <select style="width:100%" ui-select2 ng-model="gd.EmployeeID" name="employeeID" ng-required="!on">
                    <option ng-repeat="value in listEmployee" value="{{value.EmployeeID}}">
                        {{value.EmployeeID}} - {{value.Name}}
                    </option>
                </select>
            </div>


        </div>



        <label class="col-sm-2 control-label ctr-lb">* {{'Ac_treatment'|translate}}: </label>
        <div class="col-sm-4">
            <textarea class="form-control" type="text" name="ac_treatment" ng-model="gd.Treatment_Result"
                required></textarea>
        </div>
    </div>
    <!-- end of form-group -->

    <div class="form-group">
        <label class="col-sm-2 control-label ctr-lb">* {{'Injurydetail'|translate}} : </label>
        <div class="col-sm-4">
            <textarea class="form-control" type="text" rows="3" name="ac_injury" ng-model="gd.Injury_Description"
                required></textarea>
        </div>

        <label class="col-sm-6 control-label ctr-lb">{{'Witness_info'|translate}}:</label>
        <div class="col-sm-6">
            <input class="form-control" type="text" name="ac_witness" ng-model="gd.Witness_info" />
        </div>
    </div>
    <!-- end of form-group -->

    <div class="form-group">
        <label class="col-sm-2 control-label ctr-lb"> </label>
        <div class="col-sm-4">
            <input type="file" ng-file-select="UploadFileHSE($files,'Injury_Description')" id="file_process_ac"
                style="display:none !important" multiple>
            <button id="btn_file_process_ac" class="btn btn-info" style="display:inline-block;" type="button"
                ng-click="btnfile('file_process_ac','file_name_process_ac')">
                <i class="glyphicon glyphicon-plus-sign fas-ct"></i> File
            </button>
            <span><input type="checkbox" ng-model="listfile_process_ac" style="vertical-align: text-top;">
                {{'ShowFile'|translate}}</span>

            <table ng-show="listfile_process_ac"
                class="table table-bordered table-striped mb-0 table-wrapper-scroll-y my-custom-scrollbar"
                style="margin-top:10px;">
                <tr ng-repeat="step in listfileAC">
                    <td><a href="/{{step.name}}" target="_blank">{{step.name}}</a></td>
                    <td>
                        <a ng-click="removeFileInjury($index)">
                            <span class="glyphicon glyphicon-remove" style="color: red;margin-top:66%;"></span>
                        </a>
                    </td>
                </tr>
            </table>

        </div>

        <div class="col-sm-6" style="text-align: right;">
            <button id="btnSaveSubmit" type="button" class="btn btn-primary" ng-disabled="formdetail.$invalid"
                ng-click="addEmployee()">
                {{'Add'|translate}}
            </button>
        </div>
    </div>
    <!-- end of form-group -->

</form>
<!-- end of form -->

<div id="table-wrapper">
    <div id="table-scroll">
        <table id="temptable" ng-table="tableParams" class="table table-bordered table-striped ">
            <thead>
                <tr>
                    <th>{{'EmployeeID'|translate}}</th>
                    <th>{{'EmployeeName'|translate}}</th>
                    <th>{{'Injury'|translate}}</th>
                    <th>{{'Witness'|translate}}</th>
                    <th>{{'AcProcess'|translate}} </th>
                    <th>{{'Edit'|translate}} </th>
                    <th>{{'Delete'|translate}} </th>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="ac in employees">
                    <td>{{ac.EmployeeID}}</td>
                    <td>{{showEmployeeName(ac.EmployeeID)}} </td>
                    <td>{{ac.Injury_Description}}</td>
                    <td>{{ac.Witness_info}}</td>
                    <td>{{ac.Treatment_Result}}</td>
                    <td>
                        <button ng-click="getEmployee($index)" class="btn-xs btn btn-success"><span
                                class="glyphicon glyphicon-pencil" style="color: white;"></span></button>
                    </td>
                    <td>
                        <button ng-click="deleteEmployee($index)" class="btn-xs btn btn-danger"> <span
                                class="glyphicon glyphicon-trash" style="color: white;"></span></button>
                    </td>

                </tr>
            </tbody>
        </table>
    </div>
    <!-- end of table-scroll -->
</div>
<!-- end of table-wrapper -->
<div ng-if="show.checker">
    <H4 class="title">{{'NextStep' | translate}} </H4>
    <div style="margin-top:10px; margin-left:5px;" ng-repeat="leader in leaderlist">
        <span show-checker user-name={{leader.Person}}></span>
    </div>
</div>

<div class="modal-footer">

    <label ng-if="!show.submitbutton" style="color: #FF0000;float: left" class="ng-binding">**VUI LÒNG NHẤN LƯU TRƯỚC
        KHI SUBMIT ĐỂ ĐƠN ĐƯỢC LƯU**</label>
    <button id="btnSaveAC" type="button" class="btn btn-warning btn-ct-ac"
        ng-click="SaveACReport(); btnSave_Clicked = true;" ng-disabled="acform.$invalid"><i
            class="glyphicon glyphicon-floppy-disk"></i>
        {{'saveSubmit'|translate}}</button>
    <button ng-if="show.submitbutton" id="btnSaveSubmitAC" type="button" class="btn btn-primary btn-ct-ac"
        ng-click="SaveSubmitCReport(recordAC.rp_id)" ng-disabled="acform.$invalid"><i
            class="glyphicon glyphicon-floppy-disk"></i> {{'submit'|translate}} </button>
    <button ng-if="show.submitbutton" type="button" class="btn btn-default btn-ct-ac" data-dismiss="modal"
        ng-click="resetAC()"><i class="glyphicon glyphicon-remove"
            style="color: grey; vertical-align: text-bottom;"></i> {{'Close'|translate}}</button>
</div>
<!-- end of modal-footer-->