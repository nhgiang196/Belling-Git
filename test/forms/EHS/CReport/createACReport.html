<style>
    #table-wrapper {
        position: relative;
    }

    #table-scroll {
        height: 150px;
        overflow: auto;
        margin-top: 20px;
    }

    #table-wrapper table {
        width: 100%;

    }

    #table-wrapper table * {
        color: black;
    }

    #table-wrapper table thead th .text {
        position: absolute;
        top: -20px;
        z-index: 2;
        height: 20px;
        width: 35%;

    }

    .title {
        width: 101%;
        background-color: #ececec;
        padding: 5px 0px 5px 10px;
        border: 1px solid #ececec;
        border-radius: 6px;
    }

    .calender {
        color: grey;
        font-size: 29px;
    }

    .calender:hover {
        cursor: pointer;
    }

    .btn-ct-ac {
        font-weight: bold;
        font-family: tahoma;
    }

    .ctr-lb {
        padding-top: 0px !important;
    }

    .my-custom-scrollbar {
    position: relative;
    height: 117px;
    overflow: auto;
    }

    .table-wrapper-scroll-y {
    display: block;
    }

    a:hover{
        cursor: pointer;
    }

</style>
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myLargeModalLabel" data-backdrop="static"
    data-keyboard="false">
    <div class="modal-dialog modal-lg">

        <div class="modal-content" style="padding: 5px;">

            <div class="modal-body" style="padding-bottom:3px">

                <h3 class="text-center">{{'AccidentReport'|translate}}</h3>

                <H4 class="title"> {{'Info'|translate}} </H4>
                <form class="form-horizontal model-form " name="acform">

                    <div class="form-group" style="margin-bottom:20px;">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Department'|translate}}: </label>
                        <div class="col-sm-4">
                            <select style="width:100%" ui-select2 ng-model="recordAC.ac_subdepartment"
                                name="ac_subdepartment" required
                                ng-change="showEmployeeList(recordAC.ac_subdepartment)"
                                ng-disabled="mySwitch">
                                <option ng-repeat="s_dpm in sub_dpm" value="{{s_dpm.CostCenter}}">
                                    {{s_dpm.Specification|translate}}</option>
                            </select>
                        </div>
                    </div>
                    <hr>
                    <div class=" form-group ">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Acdatetime'|translate}} : </label>
                        <div class="col-sm-4">
                            <input type='text' id="time-prc-ac" class="form-control"
                                style="display: inline-block; width: 87%; margin-bottom: 6%;" date-picker
                                time="Y-m-d H:i" max="0" name="ac_datetime" ng-model="recordAC.ac_datetime" />
                            <label class="glyphicon glyphicon-calendar calender" for='time-prc-ac'
                                style="display: inline-block;margin-top: 3px;"></label>
                        </div>

                        <label class="col-sm-2 control-label ctr-lb">* {{'Improvesoft'|translate}} : </label>
                        <div class="col-sm-4">
                            <textarea class="form-control" type="text" name="ac_improvesoft"
                                ng-model="recordAC.ac_improvesoft"></textarea>

                        </div>
                    </div> <!-- end of form-group -->
                    
                    <div class=" form-group ">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Aclocation'|translate}} : </label>
                        <div class="col-sm-4">
                            <select style="width:100%"  ui-select2 ng-change="showBtnFile()" ng-model="recordAC.ac_location" name="ac_location" required>
                                <option ng-repeat='item in locationlist' value="{{item.id}}">{{item.name | translate}}</option>
                            </select>
                        </div>
                             
                        <label class="col-sm-2 control-label ctr-lb">* {{'Evaluate'|translate}}</label>
                        <div class="col-sm-4">
                            <select style="width:100%" ui-select2 ng-model="recordAC.ac_resultsoft" name="ac_resultsoft" required>
                                <option ng-repeat="item in evaluatelist" value="{{item.id}}"> {{item.name | translate}} </option>
                            </select>
                        </div>
                    </div> <!-- end of form-group -->
                         
                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb"></label>
                        <div class="col-sm-4">
                            <input type="file" ng-file-select="UploadFileHSE($files,'AC', 'Rp_Location')" id="file_location_ac"
                                style="display:none !important" multiple>
                            <button id="btn_file_location_ac" class="btn btn-info" style="display:inline-block;"
                                type="button" ng-disabled="btnFile_AC" ng-model='btnFile_AC'
                                ng-click="btnfile('file_location_ac','file_name_location_ac')">
                                <i class="glyphicon glyphicon-plus-sign fas-ct"></i> File
                            </button>
                            <span><input type="checkbox" ng-model="listfile_loc_ac" style="vertical-align: text-top;"> {{'ShowFile'|translate}}</span>

                            <table ng-show="listfile_loc_ac" class="table table-bordered table-striped mb-0 table-wrapper-scroll-y my-custom-scrollbar" style="margin-top:10px;">
                                <tr ng-repeat="step in listfile" ng-show="step.col == 'Rp_Location'">
                                    <td><a  href="/{{step.name}}"  target="_blank">{{step.name}}</a></td>
                                    <td><a ng-click="removeFile($index)">
                                            <span class="glyphicon glyphicon-remove" style="color: red; margin-top:66%;"></span>
                                        </a>
                                    </td>
                                </tr>
                            </table>

                        </div>

                        <label class="col-sm-2 control-label ctr-lb">* {{'Improvehard'|translate}}:</label>
                        <div class="col-sm-4">
                            <textarea class="form-control" type="text" name="ac_improvehard" ng-model="recordAC.ac_improvehard "></textarea>
                        </div>
                    </div> <!-- end of form-group -->

                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Rp_type'|translate}}:</label>
                        <div class="col-sm-4">
                            <select style="width:100%" ui-select2 ng-model="recordAC.ac_type" name="ac_type" required>
                                <option ng-repeat="item in ACTypelist" value="{{item.id}}"> {{item.name | translate}}</option>
                            </select>
                        </div>

                        <label class="col-sm-2 control-label ctr-lb">* {{'Evaluate'|translate}}</label>
                        <div class="col-sm-4">
                            <select style="width:100%" ui-select2 ng-model="recordAC.ac_resulthard" name="ac_resulthard" required>
                                <option ng-repeat="item in evaluatelist" value="{{item.id}}"> {{item.name | translate}} </option>
                            </select>
                        </div>
                    </div> <!-- end of form-group -->

                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Prevent'|translate}} </label>
                        <div class="col-sm-4">
                            <textarea class="form-control" type="text" name="ac_prevent" ng-model="recordAC.ac_prevent"></textarea>
                        </div>

                        <label class="col-sm-2 control-label ctr-lb">* {{'Datecomp'|translate}}:</label>
                        <div class="col-sm-4">
                            <input style="display: inline-block; width: 86%" class="form-control" id="time-cpl"
                                type="text" name="ac_datecomp" ng-model="recordAC.ac_datecomp" date-picker min="0"
                                required />
                            <label class="glyphicon glyphicon-calendar calender"
                                style="margin-bottom: 3px;margin-left: 4px;display: inline-block;vertical-align: middle;"
                                for='time-cpl' style="color:grey; font-size: 29px; width: 8%"></label>
                        </div>
                    </div><!-- end of form-group -->
                </form> <!-- end of form -->

 <!--.....................................................................................................................................................................................................................................................................-->               
                
                <H4 class="title"> {{'Victim_info'|translate}} </H4>

                <form class="form-horizontal" role="form" name="formdetail" novalidate>
                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb">* {{'EmployeeID'|translate}}: </label>
                        
                        <div class="col-sm-4">
                            <select style="width:100%" ui-select2 ng-model="gd.EmployeeID" name="employeeID" required>
                                <option ng-repeat="value in listEmployee" value="{{value.EmployeeID}}">
                                    {{value.EmployeeID}}
                                </option>
                            </select>
                        </div>

                        <label class="col-sm-2 control-label ctr-lb">* {{'Ac_treatment'|translate}}: </label>
                        <div class="col-sm-4">
                            <textarea class="form-control" type="text" name="ac_treatment" ng-model="gd.Treatment_Result" required></textarea>
                        </div>
                    </div> <!-- end of form-group -->

                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb">* {{'Injurydetail'|translate}} : </label>
                        <div class="col-sm-4">
                            <textarea class="form-control" type="text" rows="3" name="ac_injury" ng-model="gd.Injury_Description" required></textarea>
                        </div>

                        <label class="col-sm-6 control-label ctr-lb">{{'Witness_info'|translate}}:</label>
                        <div class="col-sm-6">
                            <input class="form-control" type="text" name="ac_witness" ng-model="gd.Witness_info"/>
                        </div>
                    </div> <!-- end of form-group -->

                    <div class="form-group">
                        <label class="col-sm-2 control-label ctr-lb"> </label>
                        <div class="col-sm-4">
                            <input type="file" ng-file-select="UploadFileHSE($files,'AC', 'Injury_Description')"  id="file_process_ac" style="display:none !important" multiple>
                            <button id="btn_file_process_ac" class="btn btn-info" style="display:inline-block;"
                                type="button" ng-click="btnfile('file_process_ac','file_name_process_ac')">
                                <i class="glyphicon glyphicon-plus-sign fas-ct"></i> File
                            </button>
                            <span><input type="checkbox" ng-model="listfile_process_ac" style="vertical-align: text-top;"> {{'ShowFile'|translate}}</span>

                            <table ng-show="listfile_process_ac" class="table table-bordered table-striped mb-0 table-wrapper-scroll-y my-custom-scrollbar" style="margin-top:10px;"> 
                                <tr ng-repeat="step in listfileAC">
                                    <td><a  href="/{{step.name}}"  target="_blank">{{step.name}}</a></td>
                                    <td><a ng-click="removeFileInjury($index)">
                                            <span class="glyphicon glyphicon-remove" style="color: red;margin-top:66%;"></span>
                                        </a>
                                    </td>
                                </tr>
                            </table>

                        </div>

                        <div class="col-sm-6" style="text-align: right;">
                            <button id="btnSaveSubmit" type="button" class="btn btn-primary" ng-disabled="formdetail.$invalid" ng-click="addEmployee()" >
                                {{'Add'|translate}}
                            </button>
                        </div>
                    </div> <!-- end of form-group -->

                </form> <!-- end of form -->

                <div id="table-wrapper">
                    <div id="table-scroll">
                        <table id="temptable" ng-table="tableParams"  class="table table-bordered table-striped ">
                        <!-- <table id="dtHorizontalVertical" ng-table="tableParams" class="table table-striped table-bordered table-sm" width="100%"> -->
                            <thead>     
                                <tr>
                                    <th>{{'EmployeeID'|translate}}</th>
                                    <th>{{'Injury'|translate}}</th>
                                    <th>{{'Witness'|translate}}</th>
                                    <th>{{'AcProcess'|translate}}  </th>
                                    <th>{{'Edit'|translate}} </th>
                                    <th>{{'Delete'|translate}} </th>
                                </tr>
                            </thead>
                            
                            <tbody>
                                <tr ng-repeat="ac in employees">
                                    <td>{{ac.EmployeeID}}</td>
                                    <td>{{ac.Injury_Description}}</td>
                                    <td>{{ac.Witness_info}}</td>
                                    <td>{{ac.Treatment_Result}}</td>
                                    <td>
                                        <button  ng-click="getEmployee($index)" class="btn-xs btn btn-success" ><span class="glyphicon glyphicon-pencil" style="color: white;"></span></button>
                                    </td>
                                    <td>
                                        <button ng-click="deleteEmployee($index)" class="btn-xs btn btn-danger">  <span class="glyphicon glyphicon-trash" style="color: white;"></span></button>
                                    </td>
                                   
                                </tr>
                            </tbody>
                        </table>
                    </div> <!-- end of table-scroll -->     
                </div> <!-- end of table-wrapper -->       

                <div class="modal-footer">
                    <button id="btnSaveSubmit" type="button" class="btn btn-primary btn-ct-ac" ng-click="saveSubmitAC()" ng-disabled="acform.$invalid"><i class="glyphicon glyphicon-floppy-disk"></i> {{'saveSubmit'|translate}}</button>
                    <button type="button" class="btn btn-default btn-ct-ac" data-dismiss="modal" ng-click="resetAC()"><i class="glyphicon glyphicon-remove" style="color: grey; vertical-align: text-bottom;"></i> {{'Close'|translate}}</button>
                </div> <!-- end of modal-footer-->

            </div> <!-- end of modal-body -->
        </div> <!-- end of modal-content -->
    </div> <!-- end of modal-dialog -->
</div> <!-- end of modal-->


